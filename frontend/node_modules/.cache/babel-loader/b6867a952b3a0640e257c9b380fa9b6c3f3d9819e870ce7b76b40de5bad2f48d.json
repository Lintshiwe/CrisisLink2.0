{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ntoam\\\\Desktop\\\\Projects\\\\CrisisLink2.0\\\\frontend\\\\src\\\\components\\\\SOSButton.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AlertTriangle, Zap, MapPin, Phone, Shield } from 'lucide-react';\nimport { useLocation } from '../contexts/LocationContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { sosService } from '../services/sosService';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SOSButton = ({\n  onSOSActivated,\n  disabled = false\n}) => {\n  _s();\n  const [isPressed, setIsPressed] = useState(false);\n  const [isPulsing, setIsPulsing] = useState(false);\n  const [countdown, setCountdown] = useState(null);\n  const [emergencyType, setEmergencyType] = useState('other');\n  const [description, setDescription] = useState('');\n  const [showOptions, setShowOptions] = useState(false);\n  const [isActivating, setIsActivating] = useState(false);\n  const pressStartTime = useRef(null);\n  const countdownInterval = useRef(null);\n  const vibrationRef = useRef(null);\n  const {\n    currentLocation,\n    isLocationLoading,\n    locationError\n  } = useLocation();\n  const {\n    socket,\n    sendSosAlert\n  } = useSocket();\n  const {\n    user\n  } = useAuth();\n  const emergencyTypes = [{\n    id: 'medical',\n    label: 'Medical Emergency',\n    icon: 'ðŸš‘',\n    color: 'text-red-400'\n  }, {\n    id: 'fire',\n    label: 'Fire Emergency',\n    icon: 'ðŸš’',\n    color: 'text-orange-400'\n  }, {\n    id: 'police',\n    label: 'Police Emergency',\n    icon: 'ðŸš”',\n    color: 'text-blue-400'\n  }, {\n    id: 'accident',\n    label: 'Accident',\n    icon: 'ðŸš—',\n    color: 'text-yellow-400'\n  }, {\n    id: 'natural_disaster',\n    label: 'Natural Disaster',\n    icon: 'ðŸŒªï¸',\n    color: 'text-purple-400'\n  }, {\n    id: 'other',\n    label: 'Other Emergency',\n    icon: 'âš ï¸',\n    color: 'text-gray-400'\n  }];\n\n  // Vibration patterns for different states\n  const vibrationPatterns = {\n    press: [100],\n    countdown: [50, 50, 50],\n    activate: [200, 100, 200, 100, 200],\n    cancel: [100, 50, 100]\n  };\n  const vibrate = useCallback(pattern => {\n    if ('vibrate' in navigator) {\n      navigator.vibrate(pattern);\n    }\n  }, []);\n  const startCountdown = useCallback(() => {\n    setCountdown(3);\n    setIsPulsing(true);\n    vibrate(vibrationPatterns.countdown);\n    countdownInterval.current = setInterval(() => {\n      setCountdown(prev => {\n        if (prev <= 1) {\n          clearInterval(countdownInterval.current);\n          activateSOS();\n          return null;\n        }\n        vibrate(vibrationPatterns.countdown);\n        return prev - 1;\n      });\n    }, 1000);\n  }, [vibrate]);\n  const cancelCountdown = useCallback(() => {\n    if (countdownInterval.current) {\n      clearInterval(countdownInterval.current);\n      countdownInterval.current = null;\n    }\n    setCountdown(null);\n    setIsPulsing(false);\n    setIsPressed(false);\n    vibrate(vibrationPatterns.cancel);\n  }, [vibrate]);\n  const activateSOS = useCallback(async () => {\n    if (!currentLocation) {\n      toast.error('Location not available. Please ensure location services are enabled.');\n      cancelCountdown();\n      return;\n    }\n    setIsActivating(true);\n    vibrate(vibrationPatterns.activate);\n    try {\n      const sosData = {\n        location: {\n          latitude: currentLocation.latitude,\n          longitude: currentLocation.longitude\n        },\n        emergencyType,\n        description: description.trim()\n      };\n      const response = await sosService.createSOSAlert(sosData);\n      if (response.success) {\n        toast.success('ðŸš¨ Emergency alert sent! Help is being dispatched.');\n\n        // Send SOS alert through enhanced socket system\n        const sosData = sendSosAlert({\n          userId: user.id,\n          location: {\n            latitude: currentLocation.latitude,\n            longitude: currentLocation.longitude\n          },\n          emergencyType,\n          description: description.trim()\n        });\n\n        // Callback to parent component with combined data\n        if (onSOSActivated) {\n          onSOSActivated({\n            alert: {\n              id: response.data.alert.id || `sos_${Date.now()}`,\n              ...response.data.alert,\n              ...sosData\n            },\n            nearestAgents: response.data.nearestAgents\n          });\n        }\n      } else {\n        throw new Error(response.message || 'Failed to send SOS alert');\n      }\n    } catch (error) {\n      console.error('Error activating SOS:', error);\n      toast.error(`Failed to send SOS alert: ${error.message}`);\n    } finally {\n      setIsActivating(false);\n      setCountdown(null);\n      setIsPulsing(false);\n      setIsPressed(false);\n      setShowOptions(false);\n    }\n  }, [currentLocation, emergencyType, description, socket, user, onSOSActivated, vibrate, cancelCountdown]);\n  const handleButtonPress = useCallback(() => {\n    if (disabled || isActivating || isLocationLoading) return;\n    if (locationError) {\n      toast.error('Location access required for emergency services');\n      return;\n    }\n    setIsPressed(true);\n    pressStartTime.current = Date.now();\n    vibrate(vibrationPatterns.press);\n\n    // Start countdown after 500ms of continuous press\n    setTimeout(() => {\n      if (isPressed) {\n        startCountdown();\n      }\n    }, 500);\n  }, [disabled, isActivating, isLocationLoading, locationError, isPressed, startCountdown, vibrate]);\n  const handleButtonRelease = useCallback(() => {\n    if (!isPressed) return;\n    const pressDuration = Date.now() - (pressStartTime.current || 0);\n\n    // If released before countdown starts, show options\n    if (pressDuration < 500 && !countdown) {\n      setShowOptions(true);\n    } else if (countdown) {\n      // Cancel countdown if button released during countdown\n      cancelCountdown();\n    }\n    setIsPressed(false);\n  }, [isPressed, countdown, cancelCountdown]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (countdownInterval.current) {\n        clearInterval(countdownInterval.current);\n      }\n      if (vibrationRef.current) {\n        navigator.vibrate(0); // Stop any ongoing vibration\n      }\n    };\n  }, []);\n  const selectedEmergencyType = emergencyTypes.find(type => type.id === emergencyType);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showOptions && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          scale: 0.9,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          scale: 1,\n          y: 0\n        },\n        exit: {\n          opacity: 0,\n          scale: 0.9,\n          y: 20\n        },\n        className: \"glass-dark rounded-2xl p-4 w-80 max-w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-white mb-3 text-center\",\n          children: \"Select Emergency Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-2 mb-4\",\n          children: emergencyTypes.map(type => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEmergencyType(type.id),\n            className: `p-3 rounded-lg border-2 transition-all duration-200 ${emergencyType === type.id ? 'border-emergency-500 bg-emergency-500/20' : 'border-dark-600 bg-dark-800 hover:border-dark-500'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl mb-1\",\n              children: type.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-xs font-medium ${emergencyType === type.id ? 'text-white' : 'text-gray-300'}`,\n              children: type.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 19\n            }, this)]\n          }, type.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          placeholder: \"Brief description (optional)\",\n          className: \"input w-full h-20 resize-none text-sm mb-4\",\n          maxLength: 500\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowOptions(false),\n            className: \"flex-1 btn-secondary py-3\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowOptions(false);\n              startCountdown();\n            },\n            className: \"flex-1 btn-primary py-3 font-semibold\",\n            disabled: !currentLocation,\n            children: \"Send SOS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(motion.button, {\n        onMouseDown: handleButtonPress,\n        onMouseUp: handleButtonRelease,\n        onTouchStart: handleButtonPress,\n        onTouchEnd: handleButtonRelease,\n        className: `sos-button flex items-center justify-center ${isPulsing ? 'sos-button-active emergency-glow' : ''} ${disabled || isLocationLoading ? 'opacity-50 cursor-not-allowed' : ''}`,\n        disabled: disabled || isLocationLoading,\n        whileHover: {\n          scale: disabled ? 1 : 1.05\n        },\n        whileTap: {\n          scale: disabled ? 1 : 0.95\n        },\n        animate: {\n          boxShadow: isPulsing ? ['0 0 20px rgba(220, 38, 38, 0.5)', '0 0 40px rgba(220, 38, 38, 0.8)', '0 0 20px rgba(220, 38, 38, 0.5)'] : '0 0 20px rgba(220, 38, 38, 0.3)'\n        },\n        transition: {\n          repeat: isPulsing ? Infinity : 0,\n          duration: 1\n        },\n        children: isActivating ? /*#__PURE__*/_jsxDEV(motion.div, {\n          animate: {\n            rotate: 360\n          },\n          transition: {\n            duration: 1,\n            repeat: Infinity,\n            ease: 'linear'\n          },\n          children: /*#__PURE__*/_jsxDEV(Zap, {\n            className: \"w-12 h-12 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n            className: \"w-12 h-12 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this), countdown && /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"absolute inset-0 flex items-center justify-center\",\n            initial: {\n              scale: 0\n            },\n            animate: {\n              scale: 1\n            },\n            exit: {\n              scale: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl font-bold text-white\",\n              children: countdown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"mt-4 text-center\",\n        animate: {\n          scale: isPulsing ? [1, 1.1, 1] : 1\n        },\n        transition: {\n          repeat: isPulsing ? Infinity : 0,\n          duration: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-white mb-2\",\n          children: isActivating ? 'Sending...' : countdown ? `Sending in ${countdown}` : 'Emergency SOS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 text-sm\",\n          children: isLocationLoading ? 'Getting your location...' : locationError ? 'Location access required' : countdown ? 'Release button to cancel' : 'Press and hold for emergency, tap for options'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), selectedEmergencyType && !showOptions && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"mt-2 flex items-center space-x-2 text-sm text-gray-300\",\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: selectedEmergencyType.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: selectedEmergencyType.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4 text-xs text-gray-400\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-1\",\n        children: [/*#__PURE__*/_jsxDEV(MapPin, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: isLocationLoading ? 'Locating...' : currentLocation ? 'Location ready' : 'No location'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-1\",\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Secure connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this), countdown && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"text-center p-4 glass-dark rounded-lg max-w-sm\",\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-warning-400 font-semibold mb-2\",\n        children: \"Emergency Alert Activating\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-300\",\n        children: \"Your location and emergency details will be sent to nearby rescue agents. Release the button to cancel.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n};\n_s(SOSButton, \"4lblsCUJm6u49CXQ1v7isJ56ISQ=\", false, function () {\n  return [useLocation, useSocket, useAuth];\n});\n_c = SOSButton;\nexport default SOSButton;\nvar _c;\n$RefreshReg$(_c, \"SOSButton\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","motion","AnimatePresence","AlertTriangle","Zap","MapPin","Phone","Shield","useLocation","useSocket","useAuth","sosService","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","SOSButton","onSOSActivated","disabled","_s","isPressed","setIsPressed","isPulsing","setIsPulsing","countdown","setCountdown","emergencyType","setEmergencyType","description","setDescription","showOptions","setShowOptions","isActivating","setIsActivating","pressStartTime","countdownInterval","vibrationRef","currentLocation","isLocationLoading","locationError","socket","sendSosAlert","user","emergencyTypes","id","label","icon","color","vibrationPatterns","press","activate","cancel","vibrate","pattern","navigator","startCountdown","current","setInterval","prev","clearInterval","activateSOS","cancelCountdown","error","sosData","location","latitude","longitude","trim","response","createSOSAlert","success","userId","alert","data","Date","now","nearestAgents","Error","message","console","handleButtonPress","setTimeout","handleButtonRelease","pressDuration","selectedEmergencyType","find","type","className","children","div","initial","opacity","scale","y","animate","exit","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","value","onChange","e","target","placeholder","maxLength","button","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","whileHover","whileTap","boxShadow","transition","repeat","Infinity","duration","rotate","ease","_c","$RefreshReg$"],"sources":["C:/Users/ntoam/Desktop/Projects/CrisisLink2.0/frontend/src/components/SOSButton.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { AlertTriangle, Zap, MapPin, Phone, Shield } from 'lucide-react';\r\nimport { useLocation } from '../contexts/LocationContext';\r\nimport { useSocket } from '../contexts/SocketContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { sosService } from '../services/sosService';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst SOSButton = ({ onSOSActivated, disabled = false }) => {\r\n  const [isPressed, setIsPressed] = useState(false);\r\n  const [isPulsing, setIsPulsing] = useState(false);\r\n  const [countdown, setCountdown] = useState(null);\r\n  const [emergencyType, setEmergencyType] = useState('other');\r\n  const [description, setDescription] = useState('');\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const [isActivating, setIsActivating] = useState(false);\r\n  \r\n  const pressStartTime = useRef(null);\r\n  const countdownInterval = useRef(null);\r\n  const vibrationRef = useRef(null);\r\n  \r\n  const { currentLocation, isLocationLoading, locationError } = useLocation();\r\n  const { socket, sendSosAlert } = useSocket();\r\n  const { user } = useAuth();\r\n\r\n  const emergencyTypes = [\r\n    { id: 'medical', label: 'Medical Emergency', icon: 'ðŸš‘', color: 'text-red-400' },\r\n    { id: 'fire', label: 'Fire Emergency', icon: 'ðŸš’', color: 'text-orange-400' },\r\n    { id: 'police', label: 'Police Emergency', icon: 'ðŸš”', color: 'text-blue-400' },\r\n    { id: 'accident', label: 'Accident', icon: 'ðŸš—', color: 'text-yellow-400' },\r\n    { id: 'natural_disaster', label: 'Natural Disaster', icon: 'ðŸŒªï¸', color: 'text-purple-400' },\r\n    { id: 'other', label: 'Other Emergency', icon: 'âš ï¸', color: 'text-gray-400' },\r\n  ];\r\n\r\n  // Vibration patterns for different states\r\n  const vibrationPatterns = {\r\n    press: [100],\r\n    countdown: [50, 50, 50],\r\n    activate: [200, 100, 200, 100, 200],\r\n    cancel: [100, 50, 100],\r\n  };\r\n\r\n  const vibrate = useCallback((pattern) => {\r\n    if ('vibrate' in navigator) {\r\n      navigator.vibrate(pattern);\r\n    }\r\n  }, []);\r\n\r\n  const startCountdown = useCallback(() => {\r\n    setCountdown(3);\r\n    setIsPulsing(true);\r\n    vibrate(vibrationPatterns.countdown);\r\n    \r\n    countdownInterval.current = setInterval(() => {\r\n      setCountdown((prev) => {\r\n        if (prev <= 1) {\r\n          clearInterval(countdownInterval.current);\r\n          activateSOS();\r\n          return null;\r\n        }\r\n        vibrate(vibrationPatterns.countdown);\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n  }, [vibrate]);\r\n\r\n  const cancelCountdown = useCallback(() => {\r\n    if (countdownInterval.current) {\r\n      clearInterval(countdownInterval.current);\r\n      countdownInterval.current = null;\r\n    }\r\n    setCountdown(null);\r\n    setIsPulsing(false);\r\n    setIsPressed(false);\r\n    vibrate(vibrationPatterns.cancel);\r\n  }, [vibrate]);\r\n\r\n  const activateSOS = useCallback(async () => {\r\n    if (!currentLocation) {\r\n      toast.error('Location not available. Please ensure location services are enabled.');\r\n      cancelCountdown();\r\n      return;\r\n    }\r\n\r\n    setIsActivating(true);\r\n    vibrate(vibrationPatterns.activate);\r\n    \r\n    try {\r\n      const sosData = {\r\n        location: {\r\n          latitude: currentLocation.latitude,\r\n          longitude: currentLocation.longitude,\r\n        },\r\n        emergencyType,\r\n        description: description.trim(),\r\n      };\r\n\r\n      const response = await sosService.createSOSAlert(sosData);\r\n      \r\n      if (response.success) {\r\n        toast.success('ðŸš¨ Emergency alert sent! Help is being dispatched.');\r\n        \r\n        // Send SOS alert through enhanced socket system\r\n        const sosData = sendSosAlert({\r\n          userId: user.id,\r\n          location: {\r\n            latitude: currentLocation.latitude,\r\n            longitude: currentLocation.longitude,\r\n          },\r\n          emergencyType,\r\n          description: description.trim(),\r\n        });\r\n        \r\n        // Callback to parent component with combined data\r\n        if (onSOSActivated) {\r\n          onSOSActivated({\r\n            alert: {\r\n              id: response.data.alert.id || `sos_${Date.now()}`,\r\n              ...response.data.alert,\r\n              ...sosData,\r\n            },\r\n            nearestAgents: response.data.nearestAgents,\r\n          });\r\n        }\r\n      } else {\r\n        throw new Error(response.message || 'Failed to send SOS alert');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error activating SOS:', error);\r\n      toast.error(`Failed to send SOS alert: ${error.message}`);\r\n    } finally {\r\n      setIsActivating(false);\r\n      setCountdown(null);\r\n      setIsPulsing(false);\r\n      setIsPressed(false);\r\n      setShowOptions(false);\r\n    }\r\n  }, [currentLocation, emergencyType, description, socket, user, onSOSActivated, vibrate, cancelCountdown]);\r\n\r\n  const handleButtonPress = useCallback(() => {\r\n    if (disabled || isActivating || isLocationLoading) return;\r\n    \r\n    if (locationError) {\r\n      toast.error('Location access required for emergency services');\r\n      return;\r\n    }\r\n\r\n    setIsPressed(true);\r\n    pressStartTime.current = Date.now();\r\n    vibrate(vibrationPatterns.press);\r\n    \r\n    // Start countdown after 500ms of continuous press\r\n    setTimeout(() => {\r\n      if (isPressed) {\r\n        startCountdown();\r\n      }\r\n    }, 500);\r\n  }, [disabled, isActivating, isLocationLoading, locationError, isPressed, startCountdown, vibrate]);\r\n\r\n  const handleButtonRelease = useCallback(() => {\r\n    if (!isPressed) return;\r\n    \r\n    const pressDuration = Date.now() - (pressStartTime.current || 0);\r\n    \r\n    // If released before countdown starts, show options\r\n    if (pressDuration < 500 && !countdown) {\r\n      setShowOptions(true);\r\n    } else if (countdown) {\r\n      // Cancel countdown if button released during countdown\r\n      cancelCountdown();\r\n    }\r\n    \r\n    setIsPressed(false);\r\n  }, [isPressed, countdown, cancelCountdown]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (countdownInterval.current) {\r\n        clearInterval(countdownInterval.current);\r\n      }\r\n      if (vibrationRef.current) {\r\n        navigator.vibrate(0); // Stop any ongoing vibration\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const selectedEmergencyType = emergencyTypes.find(type => type.id === emergencyType);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center space-y-6\">\r\n      {/* Emergency Type Options */}\r\n      <AnimatePresence>\r\n        {showOptions && (\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n            className=\"glass-dark rounded-2xl p-4 w-80 max-w-full\"\r\n          >\r\n            <h3 className=\"text-lg font-semibold text-white mb-3 text-center\">\r\n              Select Emergency Type\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n              {emergencyTypes.map((type) => (\r\n                <button\r\n                  key={type.id}\r\n                  onClick={() => setEmergencyType(type.id)}\r\n                  className={`p-3 rounded-lg border-2 transition-all duration-200 ${\r\n                    emergencyType === type.id\r\n                      ? 'border-emergency-500 bg-emergency-500/20'\r\n                      : 'border-dark-600 bg-dark-800 hover:border-dark-500'\r\n                  }`}\r\n                >\r\n                  <div className=\"text-2xl mb-1\">{type.icon}</div>\r\n                  <div className={`text-xs font-medium ${\r\n                    emergencyType === type.id ? 'text-white' : 'text-gray-300'\r\n                  }`}>\r\n                    {type.label}\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n            \r\n            <textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"Brief description (optional)\"\r\n              className=\"input w-full h-20 resize-none text-sm mb-4\"\r\n              maxLength={500}\r\n            />\r\n            \r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                onClick={() => setShowOptions(false)}\r\n                className=\"flex-1 btn-secondary py-3\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowOptions(false);\r\n                  startCountdown();\r\n                }}\r\n                className=\"flex-1 btn-primary py-3 font-semibold\"\r\n                disabled={!currentLocation}\r\n              >\r\n                Send SOS\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Main SOS Button */}\r\n      <div className=\"relative flex flex-col items-center\">\r\n        <motion.button\r\n          onMouseDown={handleButtonPress}\r\n          onMouseUp={handleButtonRelease}\r\n          onTouchStart={handleButtonPress}\r\n          onTouchEnd={handleButtonRelease}\r\n          className={`sos-button flex items-center justify-center ${\r\n            isPulsing ? 'sos-button-active emergency-glow' : ''\r\n          } ${disabled || isLocationLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n          disabled={disabled || isLocationLoading}\r\n          whileHover={{ scale: disabled ? 1 : 1.05 }}\r\n          whileTap={{ scale: disabled ? 1 : 0.95 }}\r\n          animate={{\r\n            boxShadow: isPulsing\r\n              ? [\r\n                  '0 0 20px rgba(220, 38, 38, 0.5)',\r\n                  '0 0 40px rgba(220, 38, 38, 0.8)',\r\n                  '0 0 20px rgba(220, 38, 38, 0.5)',\r\n                ]\r\n              : '0 0 20px rgba(220, 38, 38, 0.3)',\r\n          }}\r\n          transition={{\r\n            repeat: isPulsing ? Infinity : 0,\r\n            duration: 1,\r\n          }}\r\n        >\r\n          {isActivating ? (\r\n            <motion.div\r\n              animate={{ rotate: 360 }}\r\n              transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n            >\r\n              <Zap className=\"w-12 h-12 text-white\" />\r\n            </motion.div>\r\n          ) : (\r\n            <>\r\n              <AlertTriangle className=\"w-12 h-12 text-white\" />\r\n              {countdown && (\r\n                <motion.div\r\n                  className=\"absolute inset-0 flex items-center justify-center\"\r\n                  initial={{ scale: 0 }}\r\n                  animate={{ scale: 1 }}\r\n                  exit={{ scale: 0 }}\r\n                >\r\n                  <span className=\"text-4xl font-bold text-white\">\r\n                    {countdown}\r\n                  </span>\r\n                </motion.div>\r\n              )}\r\n            </>\r\n          )}\r\n        </motion.button>\r\n\r\n        {/* Button Label */}\r\n        <motion.div\r\n          className=\"mt-4 text-center\"\r\n          animate={{ scale: isPulsing ? [1, 1.1, 1] : 1 }}\r\n          transition={{ repeat: isPulsing ? Infinity : 0, duration: 1 }}\r\n        >\r\n          <h2 className=\"text-2xl font-bold text-white mb-2\">\r\n            {isActivating ? 'Sending...' : countdown ? `Sending in ${countdown}` : 'Emergency SOS'}\r\n          </h2>\r\n          <p className=\"text-gray-400 text-sm\">\r\n            {isLocationLoading\r\n              ? 'Getting your location...'\r\n              : locationError\r\n              ? 'Location access required'\r\n              : countdown\r\n              ? 'Release button to cancel'\r\n              : 'Press and hold for emergency, tap for options'\r\n            }\r\n          </p>\r\n        </motion.div>\r\n\r\n        {/* Selected Emergency Type */}\r\n        {selectedEmergencyType && !showOptions && (\r\n          <motion.div\r\n            className=\"mt-2 flex items-center space-x-2 text-sm text-gray-300\"\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n          >\r\n            <span className=\"text-lg\">{selectedEmergencyType.icon}</span>\r\n            <span>{selectedEmergencyType.label}</span>\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Status Indicators */}\r\n      <div className=\"flex items-center space-x-4 text-xs text-gray-400\">\r\n        <div className=\"flex items-center space-x-1\">\r\n          <MapPin className=\"w-4 h-4\" />\r\n          <span>\r\n            {isLocationLoading\r\n              ? 'Locating...'\r\n              : currentLocation\r\n              ? 'Location ready'\r\n              : 'No location'\r\n            }\r\n          </span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Shield className=\"w-4 h-4\" />\r\n          <span>Secure connection</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Instructions */}\r\n      {countdown && (\r\n        <motion.div\r\n          className=\"text-center p-4 glass-dark rounded-lg max-w-sm\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n        >\r\n          <h3 className=\"text-warning-400 font-semibold mb-2\">\r\n            Emergency Alert Activating\r\n          </h3>\r\n          <p className=\"text-sm text-gray-300\">\r\n            Your location and emergency details will be sent to nearby rescue agents.\r\n            Release the button to cancel.\r\n          </p>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SOSButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}